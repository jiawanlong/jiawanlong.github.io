import{M as N}from"./index-272f015a.js";import{_ as R}from"./index-9e167889.js";import{u as G,P as U,f as E}from"./chartEditStore-bfe1babe.js";import{u as V,a as S}from"./chartLayoutStore-a702eef3.js";import{_ as q,M as Y,f as k,d as x,e as z,c as J}from"./index-25575ef7.js";import{cA as Q,cB as w,cC as W,cD as X,g as Z,a as j,cE as tt,cF as et,cG as at,cH as nt,d as st,l as ot,a1 as rt,M as ct,aa as lt,r as h,o as d,c as f,q as p,F as it,s as dt,e as i,u as g,w as _,f as O,t as D,D as L,a6 as P,aq as _t,cI as ut,aF as ft,B as gt,C as pt,j as mt}from"./index-6c47f69d.js";import{a as ht,b as Ct,l as vt,g as yt}from"./plugin-07aea9dd.js";import{c as C}from"./index-a89d093b.js";import{i as bt}from"./icon-da829856.js";import"./index-c4c2878d.js";import"./SettingItem-dc22b861.js";/* empty css                                                                      */import"./SettingItemBox-53bd9f2b.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-b4626c95.js";import"./index.esm.min-b013ef93.js";import"./http-55a69c14.js";import"./fileTypeEnum-21359a08.js";function Et(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var St=Et;function kt(t,e,n){var c=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var l=Array(r);++c<r;)l[c]=t[c+e];return l}var xt=kt,Ot=Q,Dt=xt;function Lt(t,e){return e.length<2?t:Ot(t,Dt(e,0,-1))}var Pt=Lt,wt=w,At=St,It=Pt,$t=W;function Tt(t,e){return e=wt(e,t),t=It(t,e),t==null||delete t[$t(At(e))]}var Bt=Tt,Ft=X;function Kt(t){return Ft(t)?void 0:t}var Mt=Kt,Ht=j,Nt=nt,Rt=Bt,Gt=w,Ut=tt,Vt=Mt,qt=et,Yt=at,zt=1,Jt=2,Qt=4,Wt=qt(function(t,e){var n={};if(t==null)return n;var c=!1;e=Ht(e,function(l){return l=Gt(l,t),c||(c=l.length>1),l}),Ut(t,Yt(t),n),c&&(n=Nt(n,zt|Jt|Qt,Vt));for(var r=e.length;r--;)Rt(n,e[r]);return n}),Xt=Wt;const Zt=Z(Xt),jt=t=>(gt("data-v-344215c4"),t=t(),pt(),t),te={class:"go-content-charts-item-animation-patch"},ee=["onDragstart","onDragend","onDblclick","onClick"],ae={class:"list-header"},ne={class:"list-center go-flex-center go-transition",draggable:"true"},se={class:"list-bottom"},oe={key:0,class:"list-model"},re=["onClick"],ce=jt(()=>p("span",null,"删除",-1)),le=st({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},emits:["deletePhoto"],setup(t,{emit:e}){const n=G(),{TrashIcon:c}=bt.ionicons5,r=e,l=V(),v=ot(),A=a=>!a.disabled&&a.package===U.PHOTOS&&a.category===Y.PRIVATE,y=rt(()=>l.getChartType),I=(a,s)=>{s.disabled||(C(s.chartKey,k(s)),C(s.conKey,x(s)),a.dataTransfer.setData(ut.DRAG_KEY,ft(Zt(s,["image"]))),n.setEditCanvas(E.IS_CREATE,!0))},$=()=>{n.setEditCanvas(E.IS_CREATE,!1)},T=async a=>{if(!a.disabled)try{ht(),C(a.chartKey,k(a)),C(a.conKey,x(a));let s=await z(a);a.redirectComponent&&(a.dataset&&(s.option.dataset=a.dataset),s.chartConfig.title=a.title,s.chartConfig.chartFrame=a.chartFrame),n.addComponentList(s,!1,!0),n.setTargetSelectChart(s.id),Ct()}catch{vt(),window.$message.warning("图表正在研发中, 敬请期待...")}},B=a=>{a?.configEvents?.addHandle(a)},F=(a,s)=>{yt({message:"是否删除此图片？",transformOrigin:"center",onPositiveCallback:()=>{const m=J();r("deletePhoto",a,s),m.deletePhotos(a,s)}})};return ct(()=>y.value,a=>{a===S.DOUBLE&&lt(()=>{v.value.classList.add("miniAnimation")})}),(a,s)=>{const m=h("n-ellipsis"),b=h("n-text"),K=h("n-icon"),M=h("n-button");return d(),f("div",te,[p("div",{ref_key:"contentChartsItemBoxRef",ref:v,class:_t(["go-content-charts-item-box",[y.value===g(S).DOUBLE?"double":"single"]])},[(d(!0),f(it,null,dt(t.menuOptions,(o,H)=>(d(),f("div",{class:"item-box",key:o.title,draggable:"",onDragstart:u=>!o.disabled&&I(u,o),onDragend:u=>!o.disabled&&$(),onDblclick:u=>T(o),onClick:u=>B(o)},[p("div",ae,[i(g(N),{class:"list-header-control-btn",mini:!0,disabled:!0}),i(b,{class:"list-header-text",depth:"3"},{default:_(()=>[i(m,null,{default:_(()=>[O(D(o.title),1)]),_:2},1024)]),_:2},1024)]),p("div",ne,[o.icon?(d(),L(g(q),{key:0,class:"list-img",icon:o.icon,color:"#999",width:"48",style:{height:"auto"}},null,8,["icon"])):(d(),L(g(R),{key:1,class:"list-img",chartConfig:o},null,8,["chartConfig"]))]),p("div",se,[i(b,{class:"list-bottom-text",depth:"3"},{default:_(()=>[i(m,{style:{"max-width":"90%"}},{default:_(()=>[O(D(o.title),1)]),_:2},1024)]),_:2},1024)]),o.disabled?(d(),f("div",oe)):P("",!0),A(o)?(d(),f("div",{key:1,class:"list-tools go-transition",onClick:u=>F(o,H)},[i(M,{text:"",type:"default",color:"#ffffff"},{icon:_(()=>[i(K,null,{default:_(()=>[i(g(c))]),_:1})]),default:_(()=>[ce]),_:1})],8,re)):P("",!0)],40,ee))),128))],2)])}}});const Oe=mt(le,[["__scopeId","data-v-344215c4"]]);export{Oe as default};
