import{d as de,l as E,aB as v,M as ue,r as l,o as r,c as C,e,w as t,u as n,q as f,a6 as F,R as _e,f as d,t as S,cm as I,U as pe,D as b,cQ as me,F as B,s as P,H as L,aa as fe,cR as ge,B as ve,C as Ce,ab as be,j as he}from"./index-6c47f69d.js";import{F as T}from"./fileTypeEnum-21359a08.js";import{u as ye,E as u}from"./chartEditStore-bfe1babe.js";/* empty css                                                                      */import{l as ke}from"./index-a89d093b.js";import{i as A}from"./icon-da829856.js";import{S as we}from"./StylesSetting-121a84a5.js";import"./plugin-07aea9dd.js";import"./SettingItem-dc22b861.js";import"./SettingItemBox-53bd9f2b.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-b4626c95.js";import"./logo-9c330988.js";const Ee=""+new URL("../png/noImage.png",import.meta.url).href,Se=g=>(ve("data-v-046fcac7"),g=g(),Ce(),g),Ie={class:"go-canvas-setting"},Le={class:"upload-box"},Te=["src"],ze={class:"upload-img"},xe=Se(()=>f("img",{src:Ee},null,-1)),Re={class:"picker-height"},Ue=de({__name:"index",setup(g){const{ColorPaletteIcon:D}=A.ionicons5,{ScaleIcon:G,FitToScreenIcon:N,FitToHeightIcon:V,FitToWidthIcon:H}=A.carbon,c=ye(),a=c.getEditCanvasConfig,z=c.getEditCanvas,h=E(),y=E(!1),k=E(0),M=ke(()=>be(()=>import("./index-74e86b6b.js"),["./index-74e86b6b.js","./index-6c47f69d.js","..\\css\\index-22744142.css","./chartEditStore-bfe1babe.js","./plugin-07aea9dd.js","./icon-da829856.js","./index-a89d093b.js","..\\css\\index-bc4d6b06.css","..\\css\\index-ea3aa3be.css"],import.meta.url)),Y=[{label:"应用颜色",value:0},{label:"应用背景",value:1}],$=[{key:"ChartTheme",title:"主题颜色",icon:D,render:M}],X=[{key:v.FIT,title:"自适应",icon:G,desc:"自适应比例展示，页面会有留白"},{key:v.SCROLL_Y,title:"Y轴滚动",icon:H,desc:"X轴铺满，Y轴自适应滚动"},{key:v.SCROLL_X,title:"X轴滚动",icon:V,desc:"Y轴铺满，X轴自适应滚动"},{key:v.FULL,title:"铺满",icon:N,desc:"强行拉伸画面，填充所有视图"}];ue(()=>a.selectColor,i=>{k.value=i?0:1},{immediate:!0});const x=i=>i>50,R=()=>{c.computedScale()},K=async({file:i})=>{h.value=[];const s=i.file.type;return i.file.size>1024*1024*I?(window.$message.warning(`图片超出 ${I}M 限制，请重新上传！`),!1):s!==T.PNG&&s!==T.JPEG&&s!==T.GIF?(window.$message.warning("文件格式不符合，请重新上传！"),!1):!0},j=i=>{a.selectColor=i==0},q=()=>{c.setEditCanvasConfig(u.BACKGROUND_IMAGE,void 0),c.setEditCanvasConfig(u.SELECT_COLOR,!0)},W=()=>{y.value=!0,setTimeout(()=>{y.value=!1})},J=()=>{c.setEditCanvasConfig(u.BACKGROUND,void 0),a.backgroundImage&&c.setEditCanvasConfig(u.SELECT_COLOR,!1),W()},Q=i=>{const{file:s}=i;fe(()=>{if(s.file){const p=ge(s.file);c.setEditCanvasConfig(u.BACKGROUND_IMAGE,p),c.setEditCanvasConfig(u.SELECT_COLOR,!1)}else window.$message.error("添加图片失败，请稍后重试！")})},Z=i=>{c.setEditCanvasConfig(u.PREVIEW_SCALE_TYPE,i)};return(i,s)=>{const p=l("n-input-number"),U=l("n-form-item"),ee=l("n-form"),m=l("n-text"),te=l("n-upload-dragger"),oe=l("n-upload"),ne=l("n-color-picker"),_=l("n-space"),ae=l("n-select"),w=l("n-button"),O=l("n-icon"),se=l("n-tooltip"),le=l("n-button-group"),ie=l("n-divider"),ce=l("n-tab-pane"),re=l("n-tabs");return r(),C("div",Ie,[e(ee,{inline:"","label-width":45,size:"small","label-placement":"left"},{default:t(()=>[e(U,{label:"宽度"},{default:t(()=>[e(p,{size:"small",value:n(a).width,"onUpdate:value":[s[0]||(s[0]=o=>n(a).width=o),R],disabled:n(z).lockScale,validator:x},null,8,["value","disabled"])]),_:1}),e(U,{label:"高度"},{default:t(()=>[e(p,{size:"small",value:n(a).height,"onUpdate:value":[s[1]||(s[1]=o=>n(a).height=o),R],disabled:n(z).lockScale,validator:x},null,8,["value","disabled"])]),_:1})]),_:1}),f("div",Le,[e(oe,{"file-list":h.value,"onUpdate:fileList":s[2]||(s[2]=o=>h.value=o),"show-file-list":!1,customRequest:Q,onBeforeUpload:K},{default:t(()=>[e(te,null,{default:t(()=>[n(a).backgroundImage?(r(),C("img",{key:0,class:"upload-show",src:n(a).backgroundImage,alt:"背景"},null,8,Te)):F("",!0),_e(f("div",ze,[xe,e(m,{class:"upload-desc",depth:"3"},{default:t(()=>[d(" 背景图需小于 "+S(n(I))+"M ，格式为 png/jpg/gif 的文件 ",1)]),_:1})],512),[[pe,!n(a).backgroundImage]])]),_:1})]),_:1},8,["file-list"])]),e(_,{vertical:"",size:12},{default:t(()=>[e(_,null,{default:t(()=>[e(m,null,{default:t(()=>[d("背景颜色")]),_:1}),f("div",Re,[y.value?F("",!0):(r(),b(ne,{key:0,size:"small",style:{width:"250px"},value:n(a).background,"onUpdate:value":s[3]||(s[3]=o=>n(a).background=o),showPreview:!0,swatches:n(me)},null,8,["value","swatches"]))])]),_:1}),e(_,null,{default:t(()=>[e(m,null,{default:t(()=>[d("应用类型")]),_:1}),e(ae,{size:"small",style:{width:"250px"},value:k.value,"onUpdate:value":[s[4]||(s[4]=o=>k.value=o),j],disabled:!n(a).backgroundImage,options:Y},null,8,["value","disabled"])]),_:1}),e(_,null,{default:t(()=>[e(m,null,{default:t(()=>[d("背景控制")]),_:1}),e(w,{class:"clear-btn",size:"small",disabled:!n(a).backgroundImage,onClick:q},{default:t(()=>[d(" 清除背景 ")]),_:1},8,["disabled"]),e(w,{class:"clear-btn",size:"small",disabled:!n(a).background,onClick:J},{default:t(()=>[d(" 清除颜色 ")]),_:1},8,["disabled"])]),_:1}),e(_,null,{default:t(()=>[e(m,null,{default:t(()=>[d("适配方式")]),_:1}),e(le,null,{default:t(()=>[(r(),C(B,null,P(X,o=>e(w,{key:o.key,type:n(a).previewScaleType===o.key?"primary":"tertiary",ghost:"",size:"small",onClick:Oe=>Z(o.key)},{default:t(()=>[e(se,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[e(O,{class:"select-preview-icon",size:"18"},{default:t(()=>[(r(),b(L(o.icon)))]),_:2},1024)]),default:t(()=>[d(" "+S(o.desc),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})]),_:1})]),_:1}),e(n(we),{isCanvas:!0,chartStyles:n(a)},null,8,["chartStyles"]),e(ie,{style:{margin:"10px 0"}}),e(re,{class:"tabs-box",size:"small",type:"segment"},{default:t(()=>[(r(),C(B,null,P($,o=>e(ce,{key:o.key,name:o.key,size:"small","display-directive":"show:lazy"},{tab:t(()=>[e(_,null,{default:t(()=>[f("span",null,S(o.title),1),e(O,{size:"16",class:"icon-position"},{default:t(()=>[(r(),b(L(o.icon)))]),_:2},1024)]),_:2},1024)]),default:t(()=>[(r(),b(L(o.render)))]),_:2},1032,["name"])),64))]),_:1})])}}});const Xe=he(Ue,[["__scopeId","data-v-046fcac7"]]);export{Xe as default};
