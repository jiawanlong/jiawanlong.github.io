import{d as re,b9 as Ce,l as ee,p as oe,M as ie,a9 as O,a1 as te,cX as he,cY as ge,cZ as ke,r as l,o as u,c as m,e,w as o,f as g,q as c,F as A,s as L,aq as le,R as xe,u as x,U as be,ap as X,a6 as ne,ab as ye,aa as D,c_ as we,c$ as Ie,B as de,C as ue,j as _e,N as ce,D as V,t as Ee}from"./index-6c47f69d.js";import{n as $e}from"./noData-e5cefb25.js";import{g as U}from"./plugin-07aea9dd.js";import{i as pe}from"./icon-da829856.js";import{u as He,E as q}from"./chartEditStore-bfe1babe.js";import{l as Te}from"./index-a89d093b.js";const se=f=>(de("data-v-27e1642f"),f=f(),ue(),f),Se={key:0,class:"create-color-setting"},Oe={class:"color-list-box go-mt-3","x-gap":12,"y-gap":12,cols:4},De={class:"go-flex-items-center"},Re=se(()=>c("span",{class:"go-mr-4"},"添加",-1)),ze={class:"expend-color-box"},Ue=["onClick"],Ae=se(()=>c("div",{class:"n-color-picker-checkboard"},null,-1)),Le=["onClick"],Be=se(()=>c("div",{class:"n-color-picker-checkboard"},null,-1)),Me=re({__name:"index",props:{selectColor:Object},emits:["updateColor"],setup(f,{emit:Y}){Ce(n=>({"5ccb5b4e":r.color}));const B=f,I=Y,{AddIcon:Z,TrashIcon:G}=pe.ionicons5,J=Te(()=>ye(()=>import("./index-edb77ec1.js"),["./index-edb77ec1.js","./index.esm.min-b013ef93.js","./index-6c47f69d.js","..\\css\\index-22744142.css","./chartEditStore-bfe1babe.js","./plugin-07aea9dd.js","./icon-da829856.js"],import.meta.url)),s=ee(),r=oe({index:-1,color:""});ie(()=>B.selectColor?.id,()=>{s.value=O(B.selectColor),r.index=0,r.color=s.value?.color[0]},{immediate:!0,deep:!1});const E=te(()=>p(r.color)),p=n=>{if(!n)return{default:[],fade:[]};const d=36,b=[],$=[],t=[];for(let a=0;a<d;a++)$.unshift(he(n,1/100*(a+1))),b.push(ge(n,3.5/100*(a+1)));return b.forEach((a,v)=>{t.unshift(ke(a,1/100*(v+1)))}),{default:[...$.reverse().splice(0,parseInt(`${d/2}`)-9),...b.splice(0,parseInt(`${d/2}`))],fade:t.reverse().splice(0,27)}},i=n=>({backgroundColor:n}),k=(n,d)=>{r.color=n,r.index=d},C=(n,d)=>{n&&(r.color=n),d&&(r.index=d),D(()=>{I("updateColor",s.value)})},M=(n,d)=>{const b=d?we(n):Ie(n);s.value&&(s.value.color[r.index]=b),D(()=>{I("updateColor",s.value)})},R=()=>{const n=s.value?.color[s.value?.color.length-1]||"#2c2c31";s.value?.color.push(n),D(()=>{I("updateColor",s.value)})},P=n=>{s.value?.color.splice(n,1),n===r.index&&C(s.value?.color[n-1],n-1)},K=()=>{D(()=>{I("updateColor",s.value)})};return(n,d)=>{const b=l("n-input-group-label"),$=l("n-input"),t=l("n-input-group"),a=l("n-tag"),v=l("n-space"),H=l("n-color-picker"),N=l("n-icon"),z=l("n-tooltip"),T=l("n-button"),Q=l("n-scrollbar"),S=l("n-card"),j=l("n-text"),F=l("n-divider");return s.value?(u(),m("div",Se,[e(S,{bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(v,{justify:"space-between"},{default:o(()=>[e(t,null,{default:o(()=>[e(b,null,{default:o(()=>[g("名称:")]),_:1}),e($,{class:"create-color-name",value:s.value.name,"onUpdate:value":d[0]||(d[0]=h=>s.value.name=h),valueModifiers:{trim:!0},maxlength:"8","show-count":"",clearable:"",onChange:K},null,8,["value"])]),_:1}),e(a,{type:"warning"},{default:o(()=>[g("底部图表仅展示 7 条数据")]),_:1})]),_:1}),e(Q,{style:{"max-height":"132px"}},{default:o(()=>[c("div",Oe,[(u(!0),m(A,null,L(s.value.color,(h,_)=>(u(),m("div",{class:"color-list-item",key:_},[c("div",{class:le(["go-flex-items-center",{select:_===r.index}])},[e(H,{style:{width:"95px"},value:s.value.color[_],"onUpdate:value":y=>s.value.color[_]=y,"show-preview":!0,modes:["hex"],onComplete:y=>C(y,_),"onUpdate:show":y=>k(h,_)},null,8,["value","onUpdate:value","onComplete","onUpdate:show"]),xe(c("div",null,[e(z,{trigger:"hover"},{trigger:o(()=>[e(N,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3,onClick:y=>P(_)},{default:o(()=>[e(x(G))]),_:2},1032,["onClick"])]),default:o(()=>[g(" 删除颜色 ")]),_:2},1024)],512),[[be,_>5]])],2)]))),128)),c("div",null,[e(T,{type:"primary",secondary:"",onClick:R},{default:o(()=>[c("div",De,[Re,e(N,{size:"16"},{default:o(()=>[e(x(Z))]),_:1})])]),_:1})])])]),_:1})]),_:1}),c("div",ze,[e(S,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(j,null,{default:o(()=>[g("默认扩展色：")]),_:1}),e(F,{style:{margin:"10px 0"}}),e(v,{size:[4,0],justify:"center"},{default:o(()=>[(u(!0),m(A,null,L(E.value.default,(h,_)=>(u(),m("div",{class:"color-computed-item",key:_,onClick:y=>M(h,!1)},[Ae,c("div",{style:X(i(h))},null,4)],8,Ue))),128))]),_:1})]),_:1}),e(S,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(j,null,{default:o(()=>[g("透明扩展色：")]),_:1}),e(F,{style:{margin:"10px 0"}}),e(v,{size:[4,0],justify:"center"},{default:o(()=>[(u(!0),m(A,null,L(E.value.fade,(h,_)=>(u(),m("div",{class:"color-computed-item",key:_,onClick:y=>M(h,!0)},[Be,c("div",{style:X(i(h))},null,4)],8,Le))),128))]),_:1})]),_:1})]),e(x(J),{color:x(O)(s.value.color).splice(0,7)},null,8,["color"])])):ne("",!0)}}});const Pe=_e(Me,[["__scopeId","data-v-27e1642f"]]),ve=f=>(de("data-v-7896f3dc"),f=f(),ue(),f),Ne={class:"create-content"},je={class:"create-color-setting-box"},Fe={key:1,class:"no-data go-flex-center"},Ve=["src"],qe={class:"color-list-box"},Xe={class:"color-list"},Ye=ve(()=>c("span",null," 创建 ",-1)),Ze=ve(()=>c("span",null," 应用数据 ",-1)),Ge={class:"go-flex-items-center"},Je=re({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow","editSaveHandle"],setup(f,{emit:Y}){const B=f,I=Y,{DuplicateOutlineIcon:Z,TrashIcon:G,ArrowDownIcon:J}=pe.ionicons5,s={id:ce(),name:"未命名",color:["#6ae5bb","#69e3de","#5ac5ee","#5ac4ee","#4498ec","#3c7ddf"]},r=He(),E=ee(!1);let p=oe(r.getEditCanvasConfig.chartCustomThemeColorInfo||[]);const i=ee(void 0),k=oe({selectInfo:p[0]});ie(()=>B.modelShow,t=>{E.value=t,t&&p.length&&(k.selectInfo=p[0])});const C=te(()=>k?.selectInfo?.id),M=te(()=>r.getEditCanvasConfig.chartThemeColor),R=t=>{t.id!==C.value&&(i.value!==void 0?U({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{i.value=void 0,k.selectInfo=t}}):k.selectInfo=t)},P=()=>{const t=()=>{const a={...O(s),id:ce()};k.selectInfo=a,p.push(a),R(a),i.value=a,d(!1)};i.value!==void 0?U({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{i.value=void 0,t()}}):t()},K=t=>{const a=()=>{p.splice(t,1),r.setEditCanvasConfig(q.CHART_CUSTOM_THEME_COLOR_INFO,O(p)),D(()=>{p.length?R(p[t-1>-1?t-1:t]):k.selectInfo=void 0})};i.value!==void 0?U({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{i.value=void 0,a()}}):U({message:"是否删除此颜色？",onPositiveCallback:()=>{a()}})},n=t=>{i.value=t},d=(t=!0)=>{if(!i.value)return;const a=p.findIndex(v=>v.id===i.value?.id);if(a!==-1){t&&window.$message.success("数据应用成功！");const v=O({...i.value,name:i.value.name||"未定义"});p.splice(a,1,v),i.value=void 0;const H=r.getEditCanvasConfig.chartThemeColor;r.setEditCanvasConfig(q.CHART_THEME_COLOR,"dark"),D(()=>{r.setEditCanvasConfig(q.CHART_CUSTOM_THEME_COLOR_INFO,O(p)),r.setEditCanvasConfig(q.CHART_THEME_COLOR,H)})}else window.$message.error("数据应用失败！")},b=()=>{const t=()=>{i.value=void 0,k.selectInfo=void 0,I("update:modelShow",!1)};i.value!==void 0?U({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{t()}}):t()},$=t=>`linear-gradient(to right, ${t.color[0]} 0%, ${t.color[5]} 100%)`;return(t,a)=>{const v=l("n-text"),H=l("n-timeline-item"),N=l("n-timeline"),z=l("n-icon"),T=l("n-button"),Q=l("n-badge"),S=l("n-space"),j=l("n-divider"),F=l("n-a"),h=l("n-ellipsis"),_=l("n-card"),y=l("n-tooltip"),me=l("n-modal");return u(),V(me,{class:"go-chart-create-color",show:E.value,"onUpdate:show":a[0]||(a[0]=w=>E.value=w),"mask-closable":!1,closeOnEsc:!1},{default:o(()=>[e(_,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"900px",height:"720px"}},{header:o(()=>[]),"header-extra":o(()=>[]),action:o(()=>[e(S,{justify:"end"},{default:o(()=>[e(T,{onClick:b},{default:o(()=>[g("操作完成")]),_:1})]),_:1})]),default:o(()=>[c("div",Ne,[c("div",je,[C.value?(u(),V(x(Pe),{key:0,selectColor:k.selectInfo,onUpdateColor:n},null,8,["selectColor"])):(u(),m("div",Fe,[c("img",{src:x($e),alt:"暂无数据"},null,8,Ve),e(v,{depth:3},{default:o(()=>[g("暂未选择自定义颜色")]),_:1})]))]),c("div",qe,[e(N,{class:"pond-item-timeline",style:{width:"20px"}},{default:o(()=>[e(H,{type:"info"}),e(H,{type:"success"})]),_:1}),c("div",Xe,[e(S,null,{default:o(()=>[e(T,{class:le(["create-btn",{"is-full":!C.value}]),type:"primary",ghost:!C.value,secondary:!!C.value,onClick:P},{icon:o(()=>[e(z,null,{default:o(()=>[e(x(Z))]),_:1})]),default:o(()=>[Ye]),_:1},8,["class","ghost","secondary"]),C.value?(u(),V(Q,{key:0,show:i.value!==void 0,dot:""},{default:o(()=>[e(T,{class:"create-btn",type:"info",secondary:"",onClick:d},{icon:o(()=>[e(z,null,{default:o(()=>[e(x(J))]),_:1})]),default:o(()=>[Ze]),_:1})]),_:1},8,["show"])):ne("",!0)]),_:1}),e(j,{style:{margin:"10px 0"}}),C.value?ne("",!0):(u(),V(v,{key:0,class:"not-data-text",depth:3},{default:o(()=>[g(" 暂无自定义颜色， "),e(F,{onClick:P},{default:o(()=>[g("立即创建")]),_:1})]),_:1})),(u(!0),m(A,null,L(x(p),(w,ae)=>(u(),m("div",{class:"color-card-box",key:ae},[e(_,{class:le(["color-card",{selected:w.id===C.value}]),size:"small",hoverable:"",embedded:"",onClick:W=>R(w)},{default:o(()=>[c("div",Ge,[e(h,{style:{"text-align":"left",width:"70px"}},{default:o(()=>[g(Ee(w.name),1)]),_:2},1024),(u(!0),m(A,null,L(w.color,(W,fe)=>(u(),m("span",{class:"theme-color-item",key:fe,style:X({backgroundColor:W})},null,4))),128))]),c("div",{class:"theme-bottom",style:X({backgroundImage:$(w)})},null,4)]),_:2},1032,["class","onClick"]),e(y,{trigger:"hover"},{trigger:o(()=>[e(T,{text:"",disabled:w.id===M.value,onClick:W=>K(ae)},{default:o(()=>[e(z,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3},{default:o(()=>[e(x(G))]),_:1})]),_:2},1032,["disabled","onClick"])]),default:o(()=>[g(" 删除自定义颜色 ")]),_:2},1024)]))),128))])])])]),_:1})]),_:1},8,["show"])}}});const lo=_e(Je,[["__scopeId","data-v-7896f3dc"]]);export{lo as default};
